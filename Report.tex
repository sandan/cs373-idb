\documentclass[12pt,english]{scrartcl}

\usepackage{amsmath,amsfonts,amssymb,amscd,amsthm,amsbsy,alltt,bera,upref,fancyvrb}
\usepackage[T1]{fontenc}
\usepackage{babel}
\usepackage{graphicx}
\usepackage{tikz}

\textheight=10.5truein
\textwidth=6.8truein
\hoffset=-.5truein
\voffset=-.5truein
\pagestyle{headings}
\footskip=36pt
\swapnumbers
\DefineVerbatimEnvironment{code}{Verbatim}{fontsize=\small}
\DefineVerbatimEnvironment{example}{Verbatim}{fontsize=\small}

\usepackage{xcolor}
\definecolor{shade}{RGB}{240,255,255}
\definecolor{nw}{RGB}{255,239,213}

\makeatletter
    \setkomafont{section}{\color{white}%
        \bfseries\Large
        \begin{tikzpicture}[overlay]
        \draw[fill=black] (0,-2pt) rectangle
        (\linewidth,16.4pt);
        \end{tikzpicture}}
    \setkomafont{subsection}{\color{black}%
        \bfseries\Large
        \begin{tikzpicture}[overlay]
        \draw[fill=white] (0,-2pt) rectangle
        (\linewidth,16.4pt);
        \end{tikzpicture}}

\def\and{%
  \end{tabular}%
  \hskip 1em \@plus.10fil\relax
  \begin{tabular}[t]{c}}
\makeatother
\makeindex


\title{Technical Report: The Austinites}
\author{
  Sheeyla Garcia\\
  \and
  Jesus Hernandez\\
  \and
  Kyle Nicola\\
  \and
  Stephen Ridings\\
  \and
  Carlos Rodriguez\\
  \and
  Mark Sandan\\  
}
\date{ July 10, 2014 }
\begin{document}
\thispagestyle{plain}
\maketitle
\tableofcontents

\begin{figure}[h!]
\includegraphics[width=\textwidth]{home}
 \caption{Example Home page showing the group name and the links to the three main pages.}
\end{figure}

\section{Introduction}
The website we are designing is about the 2014 Austin City Limits (ACL) music festival. The website design has three main pages: Artists, Stages, and Sponsors.
The website allows anyone to view pages about current Artists, Sponsors, and Stages.

The technologies used are PythonAnywhere, Python 3.4, Django 1.6,
Twitter Bootstrap 3.2, Apiary, and the database sqlite3. PythonAnywhere is used to host the site using the Django web-framework to 
construct the necessary models and views to handle HTTP requests. Twitter Bootstrap is used to organize common data among different
types of pages into a base template HTML file. 

A problem that we are facing is that the information we need to complete the project hasn't been published as of the dat this report
is being written. Currently we are using stubbed relationships to 

\section{Design}
Our current design of the website uses HTML and Twitter Bootstrap to stylize each page and PythonAnywhere to host the page. 
Using Django's templating language we are able to reuse html files by extending from them. Currently we only have a single base html page that
uses Twitter Bootstrap. We have nine pages in static HTML that provide examples of the web page design and content.


\begin{figure}[h!]
\includegraphics[width=\textwidth]{UML}
 \caption{The current UML schema depicting the relationships between the Django models.}
\end{figure}

\subsection{Web Pages}
Each web page has basic information about a particular artist, sponsor, or stage involved in the ACL music festival.
Each page includes a bio, video, official website, Youtube channel, a Twitter feed, and Picture. All pages will include a navigation
bar at the top of their page that will allow the user to go back to the main "splash" page, as well as reach the Artists, Sponsors, and
Stages pages. In future phases we are considering incorporating a search bar inside of the navigation bar, so that the user can search
all categories.

\subsubsection{Splash Page}
The "splash" page will be the first page a visitor to the site will see. It will provide button style links to all subcategories (Artists,
Sponsors, Stages).
\subsubsection{Artists}
Artist Pages can be reached from the home page as well as from the Stage or Sponsor pages depending on whether the Artist played on
a Stage that was hosted by a Sponsor.
\subsubsection{Sponsors}
Sponsor pages can be reached from the home page as well as from the Artist or Stages pages depending on whether the Sponsor hosted a
Stage, and that particular Artist played on that Stage.

\subsubsection{Stages}
Stages pages can be reached from the home page as well as from the Artist or Sponsor pages depending on whether the Sponsor hosted a
Stage, and that particular Artist played on that Stage.

\subsection{RESTful  API}
The API allows GET requests to the following models: Stages, Sponsors, Artists, Members, and  Photos.
The following section will detail the attributes for the modules, and how the server will respond to the GET requests.
\subsubsection{Stages}
When a GET is called on $[/stages]$ it will return a HAL+JSON representation all the Stages in the database.  It will be a list of the stages along with their attributes.
When a GET is called on $[/stages/{id}]$ it will return a HAL+JSON representation of a single Stage in the database with the given id.  It will list the stage and all of it's attributes
Example of single stage:
\begin{verbatim}
{
         "_links": {
                "self": { "href": "stages/42" }
         },
         "id": 42,
         "name": "Stage name"
}
\end{verbatim}
\subsubsection{Sponsor}
When a GET is called on $[/sponsors]$ it will return a HAL+JSON representation all the Sponsors in the database.  It will be a list of the sponsors along with their attributes.
When a GET is called on $[/sponsors/{id}]$ it will return a HAL+JSON representation of a single Sponsor in the database with the given id.  It will list the sponsor and all of it's attributes
Example of single sponsor:
\begin{verbatim}
{
        "_links": {
                "self": { "href": "sponsors/42" }
        },
        "id": 42,
        "name": "Sponsor name",
        "business_type": "Type of Business",
        "website": "URL of sponsor website",
        "stage": 12
}
\end{verbatim}

\subsubsection{Artist}
When a GET is called on $[/artists]$ it will return a HAL+JSON representation all the Artists in the database.  It will be a list of the artists along with their attributes.
When a GET is called on $[/artists/{id}]$ it will return a HAL+JSON representation of a single Artist in the database with the given id.  It will list the artist and all of it's attributes

Example of single artist:
\begin{verbatim}
{
        "_links": {
               "self": { "href": "artists/42" }
        },
        "id": 42,
        "name": "Artist name"
        "label": "Label of artist"
        "origin": "Where the artist was from"
        "website": "URL to the artist"
        "genre": "Genre of the artist"
        "stage": 22
}
\end{verbatim}
\subsubsection{Member}
When a GET is called on $[/artists/{artist\_id}/members/]$ it will return a HAL+JSON representation all the Members in the database for the given artist id.  It will be a list of the members along with their attributes.
When a GET is called on $[/artists/{artist\_id}/members/{id}]$ it will return a HAL+JSON representation of a single Member in the database with the given id.  It will list the member and all of it's attributes

Example of single member:
\begin{verbatim}
{
        "_links": {
               "self": { "href": "artists/22/members/42" }
        },
        "id": 42,
        "first_name": "Member's first name"
        "last_name": "Member's last name"
        "artist_id": 22
}
\end{verbatim}
\subsubsection{Photo}
When a GET is called on $[/artists/{artist\_id}/photos/]$ it will return a HAL+JSON representation all the Photos in the database for the given artist id.  It will be a list of the photos along with their attributes.
When a GET is called on $[/artists/{artist\_id}/photos/{id}]$ it will return a HAL+JSON representation of a single Photo in the database with the given id.  It will list the photo and all of it's attributes

Example of single photo:
\begin{verbatim}
{
        "_links": {
               "self": { "href": "artists/22/photos/42" }
        },
        "id": 42,
        "file_name": "photo.jpg"
        "artist_id": 22
}
\end{verbatim}

\subsection{Django Models}
The Django models created represent the entities we intend to keep in the database for the future when use dynamically loaded pages.
The following subsections document the attributes and intended functionality of each class instance method. When running the tests
using the Django framework a temporary. 

\subsubsection{Artist}
The Artist class represents the current Artists playing on a sponsored stage. All Artists will be a child of some
stage depending on whether they are playing that Stage or not. We are assuming that an Artist will play on 
exactly one stage. The Artist class is implemented using the following:
\begin{verbatim}
attributes:
- id: Primary Key, integer type field.
- name: the name of max length 400 characters.
- label: the artist label with a maximum length of 400 characters.
- origin: the place of origin the artist/group formed with a maximum length of 400 characters.
- website: the official website of the artist or fan site if none. Maximum length of 400 characters.
- genre: the genre associated with the artist. May span more than one. maximum length of 400 characters.
- stage: Foreign Key, integer of type field.

methods:
- get.url(): returns the string "/artists/{id}" . Maximum of number of 400 characters.
- __str__(): returns the name string of the artist.
\end{verbatim}


\subsubsection{Sponsor}
The Sponsor class represents the ACL sponsors that sponsor a Stage for the Artist to perform on.
This relationship is expressed using the one-to-many relationship between the Sponsor and the Stage
class. 

The Sponsor class has the following attributes and methods:
\begin{verbatim}
attributes:
- id: Primary Key, integer type field
- name: a character type field with a maximum length of 400 characters
- business_type: a character type field with a maximum length of 400 characters
- website: a character type field with a maximum length of 400 characters
- stage: Foreign Key, integer of type field

methods:
- get.url(): returns the string "/sponsors/{id}". Maximum number of 400 characters.
- __str__(): returns a string that represents the name of the sponsor.
\end{verbatim}

\subsubsection{Stage}
The Stage class is meant to represent the stage that an Artist will perform on. All stages
have one sponsor. The Stage class extends from the Django models.Models class.

The Stage class has the following attributes and methods:
\begin{verbatim}
attributes:
- id: Primary Key, integer type field
- name: a character type field with a maximum length of 400 characters
- sponsor: Foreign Key, integer of type field

methods:
- get.url(): returns the string "/stages/%s/{name}" where name is the stage name.
- __str__(): returns a string that represents the name of the stage
\end{verbatim}

\subsubsection{Photo}
The Photo class represents a path to a photo of an Artist. 
All Photo's are associated with an Artist in a many-to-one relationship.
This is expressed with the Foreign key being an Artist that the Photo is associated with. 
The Photo class has the following attributes and methods:
\begin{verbatim}
attributes:
-file_name: A CharField of 400 characters. File name of the photo. 
-artist: The ForeignKey relating a Photo to an Artist.

methods:
- __str__(): returns the file_name of the photo.
\end{verbatim}

\subsubsection{Member}
The Member class is meant to represent the members of the Artist group. The Member class has the following attributes and methods:
\begin{verbatim}
attributes:
-first_name: A CharField of 400 characters. 
-last_name: A CharField of 400 characters.
-artist: ForeignKey relating the Member to Artist. Integer type field.

methods:
- __str__(): returns the string of form "{first_name} {last_name}" if there is
             a last anme available. Otherwise "{first_name}" is returned.
\end{verbatim}

\section{Unit Tests}
The unit tests currently implemented reflect the expected functionality of the django models and database.
Currently we are using the sqlite3 database as a backend. We assume for each function in the set of tests that the state of the database is reset.
The following give descriptions of each model test.

\subsection{Stage Test}
Total tests: 7
\begin{itemize}
\item test\_create\_empty\_stage: Tests that uninitialized (stateless) Stages can be created.

\item test\_create\_stage : Tests that the $name$ attribute is set correctly when initialized.
 
\item test\_get\_stage: Tests that the $get\_stage$ method returns the Stage instance we saved into the database. Also tests the filtering functionality of setting the id of the instance.

\item test\_stage\_name: Tests the $max\_length$ property of CharField when setting the name of Stage.

\item test\_stage\_url\_1, test\_stage\_url\_2,test\_stage\_url\_3: Tests whether an instance of the desired Stage class 
is saved in the database table and returns the correct $url$ attribute. 
\end{itemize} 

\subsection{Artist Test}
Total tests: 8
\begin{itemize}
\item test\_create\_artist: Tests the Artist instance attributes actually match the given values
that were passed when constructed (including a Stage instance)
 
\item test\_get\_artist: Tests that an instance of Artist can be retrieved from the database with the attributes used to create it.
 
\item test\_empty\_artist: Tests that an IntegrityError is thrown when an Artist instance is saved in the database without setting a ForeignKey.
 
\item test\_empty\_artist\_with\_stage: Tests the default values of an Artist instance with a ForeignKey.
 
\item test\_artist\_name: Tests the $max\_length$ property of CharField when setting the name of Artist.
 
\item test\_artist\_url\_1, test\_artist\_url\_2, test\_artist\_url\_3: Tests that the many-to-one relationship between
Artists and Stages is valid. Also tests the $get_url$ method returns the correct url according the id of the instance.
\end{itemize} 

\subsection{Sponsor Test} 
Total tests: 6
\begin{itemize}
\item test\_empty\_sponsor: Tests that a Sponsor's default values and ID are set correctly.
 
\item test\_save\_sponsor: Tests that the name matches the passed value given when the Sponsor instance was created.  
 
\item test\_get\_sponsor\_name: Tests the $max\_length$ property of CharField when setting the name of Sponsor.

\item test\_sponsor\_url\_1, \item test\_sponsor\_url\_2: Tests that the $get_url$ is returned in the proper format.
\end{itemize}

\subsection{Member Test} 
Total tests: 5

\begin{itemize} 
\item test\_empty\_member:  Tests that a Member can be made with no exceptions when created with an Artist. Tests the default values of Member are empty.
 
\item  test\_get\_empty\_member: ???
 
\item  test\_create\_member: Tests that the attributes are correctly set in Member.
 
\item  test\_get\_member: : Creates an instance of Stage,Artist and Member with particular values some 
attributes. They are all saved into the database after being created. It then asserts that the 
Member instance is not of type None and that all the values passed when constructed are 
actually the values.  
 
\item  test\_str\_member:: Creates an instance of Stage,Artist and Member with particular values some 
attributes. They are all saved into the database after being created.  A particular row with a 
private key is then requested and It then asserts that the the values are equal to the values 
passed when constructed.  
\end{itemize}

\subsection{Photo Test} 
Total tests: 4
\begin{itemize}
\item test\_empty\_photo: 
\item test\_create\_photo: 
\item test\_get\_photo: 
\item test\_str\_photo: 
\end{itemize}


\end{document}